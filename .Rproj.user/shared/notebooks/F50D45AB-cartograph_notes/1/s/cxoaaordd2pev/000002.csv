"0","# Define list of years which have data"
"0","years <- names(municipalities[,15:45])"
"0",""
"0","# Loop over each year, create a cartogram and save plot"
"0","get_cartograms = function(){"
"0","    for (x in years){"
"0","    "
"0","      x_cartogram <- cartogram_cont(mun_sf, x, iter = 5)"
"0","      "
"0","      p <- ggplot() +"
"0","      geom_sf(data = x_cartogram, aes_string(fill = x), size=0, alpha=0.9)+"
"0","      theme_void()+"
"0","      scale_fill_viridis(name=""Population (thousands)"") +"
"0","      labs(title = ""Denmark"", subtitle=paste(""Population per kommune in "", x, sep="""")) +"
"0","      geom_text(data=centers_cartogram, aes_string(x=""x"", y=""y"", label=x), color=""white"", size=3, alpha=1) +"
"0","      theme("
"0","        text = element_text(color = ""#22211d""), "
"0","        plot.background = element_rect(fill = ""#f5f5f4"", color = NA), "
"0","        panel.background = element_rect(fill = ""#f5f5f4"", color = NA), "
"0","        legend.background = element_rect(fill = ""#f5f5f4"", color = NA),"
"0","        plot.title = element_text(size= 22, hjust=0.5, color = ""#4e4d47"", margin = margin(b = -0.1, t = 0.4, l = 2, unit = ""cm"")),"
"0","        plot.subtitle = element_text(size= 13, hjust=0.5, color = ""#4e4d47"", margin = margin(b = -0.1, t = 0.4, l = 2, unit = ""cm"")),"
"0","        legend.position = c(0.8, 0.8))"
"0","    "
"0","    ggsave(plot = p, filename=paste(""plot_"", x, "".png"", sep=""""))"
"0","  }"
"0","}"
